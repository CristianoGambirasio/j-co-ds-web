<template>
  <v-sheet id="body">
    <v-container class="overflow-y-auto" style="max-height: 100vh; padding: 0;">
      <v-container v-for="doc in es5Doc" :key="doc" id="cards" class="overflow-y-auto" style="max-height: 100vh;">
        <json-viewer :value="doc" theme="json-virwer-theme"></json-viewer>
      </v-container>
    </v-container>
  </v-sheet>
</template>

<script>
import Vue from 'vue'
import JsonViewer from 'vue-json-viewer'

Vue.use(JsonViewer)

export default {
  data () {
    return {
      es5Doc: [{ '~geometry': { coordinates: [[[[2.778513, 41.648807], [2.765046, 41.675167], [2.771366, 41.707411], [2.763464, 41.733982], [2.693192, 41.741169], [2.664186, 41.744136], [2.549833, 41.723983], [2.466498, 41.785979], [2.34825, 41.821069], [2.338153, 41.840285], [2.330955, 41.853984], [2.337646, 41.88086], [2.380542, 41.878278], [2.410892, 41.891991], [2.444491, 41.893899], [2.457224, 41.903314], [2.470932, 41.915032], [2.471362, 41.927798], [2.438387, 41.963628], [2.470739, 41.980301], [2.49561, 42.010296], [2.497423, 42.034512], [2.480986, 42.066968], [2.418965, 42.072016], [2.373632, 42.111371], [2.310189, 42.113431], [2.266917, 42.140325], [2.126157, 42.120495], [2.088364, 42.138693], [2.019528, 42.149984], [1.98465, 42.1828], [1.99436, 42.185715], [2.015478, 42.170128], [2.050337, 42.182236], [2.049205, 42.209176], [2.029121, 42.235516], [2.051758, 42.294409], [2.02787, 42.304366], [1.977935, 42.303141], [1.909667, 42.318141], [1.842707, 42.306377], [1.837069, 42.351411], [1.851772, 42.370375], [1.827976, 42.378102], [1.806358, 42.373481], [1.801608, 42.423233], [1.735625, 42.439824], [1.728505, 42.459076], [1.731011, 42.492401], [1.825636, 42.484121], [1.889675, 42.450569], [1.934678, 42.451591], [1.955969, 42.421605], [1.968289, 42.379643], [2.014547, 42.350616], [2.082918, 42.364263], [2.149192, 42.420474], [2.20124, 42.417918], [2.259013, 42.436505], [2.31041, 42.426078], [2.360728, 42.403654], [2.428251, 42.392467], [2.45261, 42.369281], [2.482825, 42.342537], [2.526939, 42.334115], [2.543766, 42.336404], [2.568396, 42.356901], [2.667943, 42.342394], [2.673511, 42.352678], [2.657306, 42.383445], [2.677601, 42.404096], [2.693192, 42.408951], [2.742684, 42.424363], [2.77262, 42.413747], [2.789713, 42.416948], [2.840548, 42.456412], [2.871877, 42.464848], [2.918074, 42.458959], [2.945323, 42.479593], [2.970494, 42.46722], [3.037067, 42.47264], [3.089538, 42.426532], [3.119095, 42.436992], [3.174804, 42.435375], [3.175236, 42.434981], [3.165219, 42.423072], [3.159475, 42.38249], [3.179524, 42.350528], [3.193987, 42.342131], [3.229824, 42.347884], [3.246378, 42.336289], [3.27193, 42.336219], [3.312999, 42.318492], [3.295383, 42.303298], [3.27993, 42.261042], [3.253682, 42.244901], [3.235282, 42.247591], [3.214173, 42.23847], [3.161519, 42.260586], [3.13327, 42.242927], [3.11443, 42.208819], [3.113571, 42.169638], [3.124126, 42.133842], [3.17456, 42.108056], [3.207628, 42.066869], [3.19722, 42.03436], [3.199765, 42.002371], [3.230184, 41.956939], [3.208666, 41.904261], [3.169736, 41.865179], [3.0996, 41.840285], [3.054647, 41.791552], [2.980046, 41.756529], [2.934212, 41.719322], [2.819097, 41.685389], [2.778513, 41.648807]]], [[[2.000416, 42.126339], [2.022141, 42.126988], [2.017884, 42.107994], [2.006633, 42.104615], [2.000416, 42.126339]]], [[[2.009206, 42.448245], [1.980893, 42.44787], [1.960217, 42.453554], [1.957214, 42.458761], [1.962646, 42.477868], [1.976964, 42.485998], [1.980577, 42.494592], [1.98947, 42.493361], [1.998265, 42.484866], [1.986535, 42.472792], [1.992644, 42.462623], [2.013083, 42.452065], [2.009206, 42.448245]]]], type: 'MultiPolygon' }, properties: { URBN_TYPE: 2, FID: 'ES512', NAME_LATN: 'Girona', COAST_TYPE: 1, CNTR_CODE: 'ES', MOUNT_TYPE: 2, LEVL_CODE: 3, NUTS_ID: 'ES512', NUTS_NAME: 'Girona' } }, { '~geometry': { coordinates: [[[10.579576, 53.897626], [10.571493, 53.882675], [10.607061, 53.847741], [10.563871, 53.829212], [10.58228, 53.804649], [10.548949, 53.791855], [10.524888, 53.763126], [10.50261, 53.757607], [10.471891, 53.763483], [10.411517, 53.73499], [10.44217, 53.71371], [10.43766, 53.704462], [10.414762, 53.696537], [10.412128, 53.667286], [10.449808, 53.637821], [10.503315, 53.625236], [10.505636, 53.610368], [10.472481, 53.598682], [10.421324, 53.600158], [10.403705, 53.592468], [10.310264, 53.551682], [10.294941, 53.525786], [10.272221, 53.520578], [10.236679, 53.496354], [10.222932, 53.500109], [10.210472, 53.517599], [10.169013, 53.519695], [10.15421, 53.542929], [10.153021, 53.575914], [10.191806, 53.586339], [10.192099, 53.592468], [10.193103, 53.613438], [10.218521, 53.631469], [10.195205, 53.638612], [10.190323, 53.656864], [10.149776, 53.675903], [10.160935, 53.704667], [10.182499, 53.713578], [10.189704, 53.729582], [10.168314, 53.736522], [10.118671, 53.715202], [10.082318, 53.718243], [10.07143, 53.697023], [10.062696, 53.711052], [10.027305, 53.729767], [10.024966, 53.747578], [10.044455, 53.763336], [10.105686, 53.767973], [10.109347, 53.749165], [10.120971, 53.746364], [10.141999, 53.75975], [10.136105, 53.772334], [10.147009, 53.783615], [10.192727, 53.800244], [10.22198, 53.783275], [10.255035, 53.783971], [10.259849, 53.79479], [10.243048, 53.828388], [10.291765, 53.853383], [10.315053, 53.855563], [10.325778, 53.869902], [10.340254, 53.868556], [10.3546, 53.855135], [10.396365, 53.863751], [10.437516, 53.882677], [10.433817, 53.899261], [10.498472, 53.902335], [10.533858, 53.91881], [10.576261, 53.905204], [10.579576, 53.897626]]], type: 'Polygon' }, properties: { URBN_TYPE: 2, FID: 'DEF0F', NAME_LATN: 'Stormarn', COAST_TYPE: 3, CNTR_CODE: 'DE', MOUNT_TYPE: 4, LEVL_CODE: 3, NUTS_ID: 'DEF0F', NUTS_NAME: 'Stormarn' } }, { '~geometry': { coordinates: [[[13.438431, 48.548895], [13.385813, 48.550419], [13.354293, 48.567312], [13.322044, 48.598805], [13.391497, 48.610021], [13.495985, 48.601832], [13.51337, 48.590978], [13.493793, 48.567188], [13.468697, 48.555721], [13.445265, 48.560294], [13.438431, 48.548895]]], type: 'Polygon' }, properties: { URBN_TYPE: 3, FID: 'DE222', NAME_LATN: 'Passau, Kreisfreie Stadt', COAST_TYPE: 3, CNTR_CODE: 'DE', MOUNT_TYPE: 4, LEVL_CODE: 3, NUTS_ID: 'DE222', NUTS_NAME: 'Passau, Kreisfreie Stadt' } }, { '~geometry': { coordinates: [[[11.806467, 47.925747], [11.771998, 47.940501], [11.753083, 47.923288], [11.740871, 47.921023], [11.729111, 47.918842], [11.696561, 47.936899], [11.623462, 47.920328], [11.567937, 47.955884], [11.519838, 47.950457], [11.49633, 47.971661], [11.465816, 47.964802], [11.428582, 47.978543], [11.407455, 47.992494], [11.431117, 48.012713], [11.414647, 48.033692], [11.417072, 48.052432], [11.406647, 48.073483], [11.420595, 48.097224], [11.384868, 48.111454], [11.390134, 48.119289], [11.400386, 48.116471], [11.412451, 48.127115], [11.432228, 48.134639], [11.455971, 48.130057], [11.475854, 48.084138], [11.509408, 48.06572], [11.579783, 48.089427], [11.678495, 48.080251], [11.70583, 48.104061], [11.70082, 48.119679], [11.712677, 48.138144], [11.680728, 48.152663], [11.686093, 48.178049], [11.633999, 48.186111], [11.643217, 48.221633], [11.616427, 48.227968], [11.59108, 48.214592], [11.577457, 48.228239], [11.540627, 48.230214], [11.499818, 48.248146], [11.502124, 48.26144], [11.521122, 48.278833], [11.548983, 48.29013], [11.555695, 48.293054], [11.564876, 48.291604], [11.578699, 48.299546], [11.588507, 48.29013], [11.619334, 48.270873], [11.738186, 48.276334], [11.753702, 48.256134], [11.75617, 48.221111], [11.759914, 48.186111], [11.773077, 48.16162], [11.750329, 48.136242], [11.764563, 48.101026], [11.804955, 48.060029], [11.788625, 48.052699], [11.786393, 48.023696], [11.768834, 48.018723], [11.765821, 47.994264], [11.842806, 47.961025], [11.847953, 47.948253], [11.84022, 47.948164], [11.838426, 47.939384], [11.830508, 47.938076], [11.825584, 47.924474], [11.806467, 47.925747]]], type: 'Polygon' }, properties: { URBN_TYPE: 1, FID: 'DE21H', NAME_LATN: 'MÃ¼nchen, Landkreis', COAST_TYPE: 3, CNTR_CODE: 'DE', MOUNT_TYPE: 4, LEVL_CODE: 3, NUTS_ID: 'DE21H', NUTS_NAME: 'MÃ¼nchen, Landkreis' } }, { '~geometry': { coordinates: [[[2.49213, 45.73767], [2.45261, 45.708498], [2.433065, 45.701459], [2.358677, 45.710981], [2.347108, 45.705751], [2.336873, 45.681846], [2.276177, 45.664685], [2.268735, 45.689132], [2.199533, 45.700956], [2.196701, 45.716342], [2.172296, 45.732001], [2.151068, 45.723145], [2.132161, 45.732556], [2.087089, 45.730791], [2.08002, 45.745862], [2.049859, 45.761731], [2.005744, 45.749838], [1.989251, 45.723639], [1.956605, 45.722638], [1.942698, 45.706821], [1.920969, 45.710523], [1.898732, 45.698276], [1.876802, 45.729887], [1.883344, 45.744815], [1.877889, 45.754536], [1.89427, 45.762867], [1.882564, 45.792925], [1.836166, 45.821408], [1.821481, 45.81263], [1.779875, 45.832724], [1.771084, 45.865443], [1.727226, 45.842577], [1.66163, 45.836686], [1.607227, 45.856365], [1.604445, 45.876266], [1.595036, 45.883625], [1.622242, 45.895971], [1.638618, 45.893356], [1.624981, 45.930252], [1.586815, 45.931076], [1.567547, 45.916286], [1.512672, 45.934857], [1.52166, 45.947683], [1.565207, 45.965666], [1.573787, 45.984329], [1.563475, 45.997102], [1.535956, 46.003275], [1.544974, 46.036111], [1.534197, 46.055464], [1.54039, 46.074212], [1.488391, 46.107219], [1.503818, 46.123763], [1.494264, 46.139272], [1.4604, 46.153611], [1.462362, 46.167057], [1.453199, 46.17816], [1.403822, 46.182819], [1.379516, 46.21416], [1.390523, 46.234457], [1.415646, 46.244397], [1.409211, 46.264864], [1.433, 46.272016], [1.418936, 46.282189], [1.439973, 46.304955], [1.441387, 46.331386], [1.415137, 46.340233], [1.415186, 46.347215], [1.496191, 46.39787], [1.524278, 46.424845], [1.541135, 46.418263], [1.549974, 46.396702], [1.613937, 46.420472], [1.617718, 46.398973], [1.632385, 46.388099], [1.645481, 46.388882], [1.682905, 46.415652], [1.711377, 46.39375], [1.727538, 46.391057], [1.748273, 46.407037], [1.757854, 46.426932], [1.755261, 46.447417], [1.76778, 46.451957], [1.795791, 46.453489], [1.836968, 46.427771], [1.911135, 46.441079], [1.928869, 46.433428], [1.97976, 46.438918], [2.093724, 46.410926], [2.167785, 46.424069], [2.281044, 46.420403], [2.287115, 46.387628], [2.332823, 46.372321], [2.308159, 46.354312], [2.320538, 46.331614], [2.367044, 46.314226], [2.389412, 46.328964], [2.417315, 46.309984], [2.420794, 46.289105], [2.45261, 46.292353], [2.475328, 46.283034], [2.486558, 46.253803], [2.512469, 46.23894], [2.527771, 46.188341], [2.557657, 46.171832], [2.565373, 46.143036], [2.549747, 46.113491], [2.552796, 46.082644], [2.5718, 46.049338], [2.600717, 46.031422], [2.594756, 45.994771], [2.607191, 45.969809], [2.57013, 45.956273], [2.548181, 45.933445], [2.546268, 45.907155], [2.504253, 45.885125], [2.492815, 45.866605], [2.45261, 45.866442], [2.445729, 45.863881], [2.445371, 45.848114], [2.429016, 45.836719], [2.402129, 45.835926], [2.391491, 45.826631], [2.42749, 45.792296], [2.43981, 45.763945], [2.45261, 45.761355], [2.484744, 45.746308], [2.49213, 45.73767]]], type: 'Polygon' }, properties: { URBN_TYPE: 3, FID: 'FRI22', NAME_LATN: 'Creuse', COAST_TYPE: 3, CNTR_CODE: 'FR', MOUNT_TYPE: 4, LEVL_CODE: 3, NUTS_ID: 'FRI22', NUTS_NAME: 'Creuse' } }],
      dbSelected: null,
      collSelected: null,
      documentsLoaded: []
    }
  },
  methods: {
    updateParam (db, coll) {
      this.dbSelected = db
      this.collSelected = coll
      this.buildWorkspace()
    },
    buildWorkspace () {
      this.documentsLoaded = this.getCollection(this.dbSelected, this.collSelected, 5, 0)
    },
    async getCollection (nameDb, nameColl, limit, offset) {
      let documents
      await new Promise(resolve => {
        this.connection.send('GET_COLLECTION###' + nameDb + '###' + nameColl + '###' + limit + '###' + offset)
        const finish = resolve
        this.handleResponse(finish)
      }).then((value) => {
        documents = value
      })
      return documents
    }

  }
}
</script>

<style>
#body{
  background-color: #F5EAEA;
}
#cards{
  padding: 5px;
  padding-bottom: 0;
}
.json-virwer-theme {
  background-color: #7FCD91;
}
</style>
